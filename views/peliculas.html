<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/peliculas.css">
    <title>Peliculas</title>
</head>

<body>
    <header class="menu_header">
        <div class="logotipado">
            <img src="../storage/img/logoprincipal.svg" alt="">
            <h1>Rank My Fandom</h1>
        </div>
        <div class="opciones_menu">
            <a href="../views/principal.html">Home</a>
            <a href="../views/peliculas.html">Peliculas</a>
            <a href="../views/series.html">Series</a>
            <a href="../views/crear.html">Crear</a>
        </div>
        <div class="infouser">
            <img src="../storage/img/usuarionormal.png" alt="">
            <p>Usuario Normal</p>
        </div>
    </header>
    <article class="top_tendencia">
        <h2>Ciencia Ficción</h2>

        <div class="carrusel">
            <button class="flecha izquierda">&#10094;</button>

            <div class="categorizacion" id="peliculas-container">
                <!-- Cada tarjeta -->
                <div class="caja_tendencias">
                    <div class="banner-peli">
                        <img src="../storage/img/Destino final.png" alt="">
                    </div>
                    <div class="info_peli">
                        <div class="likes_dislikes">
                            <div class="likes"><img src="../storage/img/like.svg">
                                <p>500k</p>
                            </div>
                            <div class="dislikes"><img src="../storage/img/dislike.svg">
                                <p>100k</p>
                            </div>
                        </div>
                        <div class="comentarios"><img src="../storage/img/comentario.png">
                            <p>100</p>
                        </div>
                    </div>
                </div>
    </article>

</body>
<script>
    // seleccionamos cada carrusel completo
    const carruseles = document.querySelectorAll(".carrusel");

    carruseles.forEach((carrusel) => {
        const contenedor = carrusel.querySelector(".categorizacion");
        const btnIzquierda = carrusel.querySelector(".flecha.izquierda");
        const btnDerecha = carrusel.querySelector(".flecha.derecha");

        btnDerecha.addEventListener("click", () => {
            contenedor.scrollBy({ left: 300, behavior: "smooth" });
        });

        btnIzquierda.addEventListener("click", () => {
            contenedor.scrollBy({ left: -300, behavior: "smooth" });
        });
    });
</script>
<script>
    async function fetchMovies() {
        try {
            const res = await fetch("http://localhost:3000/api/v1/movies");
            const movies = await res.json();

            const container = document.getElementById("peliculas-container");
            container.innerHTML = ""; // limpiamos antes de renderizar

            movies.forEach(movie => {
                const card = document.createElement("div");
                card.classList.add("caja_tendencias");

                card.innerHTML = `
        <div class="banner-peli">
            <img src="${movie.img}" alt="${movie.titulo}">
        </div>
        <div class="info_peli">
            <div class="likes_dislikes">
                <div class="likes"><img src="../storage/img/like.svg">
                    <p>500k</p>
                </div>
                <div class="dislikes"><img src="../storage/img/dislike.svg">
                    <p>100k</p>
                </div>
            </div>
            <div class="comentarios"><img src="../storage/img/comentario.png">
                <p>100</p>
            </div>
        </div>
    `;

                container.appendChild(card);
            });

        } catch (err) {
            console.error("Error al cargar películas:", err);
        }
    }

    // Llamar a la función al cargar la página
    document.addEventListener("DOMContentLoaded", fetchMovies);
</script>



</html>